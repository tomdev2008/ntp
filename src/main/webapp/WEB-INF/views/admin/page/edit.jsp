<%@page pageEncoding="UTF-8"%><%@ taglib prefix="c" uri="http://java.sun.com/jsp/jstl/core"%><%@ taglib prefix="j" uri="/WEB-INF/tld/formtag.tld"%><j:set name="ctx" value="${pageContext.request.contextPath}" /><!DOCTYPE html><html lang="zh_CN"><head><link rel="stylesheet"	href="${ctx}/resources/css/jquery.autocomplete.css" /><script type="text/javascript"	src="${ctx }/resources/js/jquery.autocomplete.pack.js"></script><script type="text/javascript"	src="${ctx }/resources/js/jquery.jalert.js"></script><script type="text/javascript"	src="${ctx}/resources/js/jquery.validate.min.js"></script><style type="text/css">#adduser {	background-color: #FFF;	padding: 10px 20px;}#adduser .u_list>tbody>tr a {	cursor: pointer;	text-decoration: none}#inpUser {	width: 400px;}</style><script type="text/javascript">	jQuery(document).ready(function() {		jQuery("#inputForm").validate();		//如果已经添加过的 则不能再添加(此处不进行删除后再次添加原因在于前台的顺序控制)		return;	});</script><script type="text/javascript">	$(function() {		//加普通人员信息		if ($("#teacher")[0]) {			$("#teacher").autocomplete(					"${ctx}/ajax/user/findByName",					{						matchContains : true,						max : 100,						width : 410,						dataType : 'json',						// 加入对返回的json对象进行解析的函数，函数返回一个数组						parse : function(data) {							var rows = [];							for ( var i = 0; i < data.length; i++) {								rows[rows.length] = {									data : data[i],									value : data[i].name,									result : data[i].name								// 显示在输入文本框里的内容 ,								};							}							return rows;						},						formatItem : function(item) {							var photo;							if (item.imgUrl.indexOf("http") > -1) {								photo = item.imgUrl;							} else {								photo = "${ctx}/" + item.imgUrl;							}							return '<img src="' + (photo) + '" alt="">'									+ item.name + '&nbsp;&nbsp;&nbsp;&nbsp;'									+ item.org + '&nbsp;&nbsp;'									+ item.department;						}					}).result(function(event, item) {				$("#teacher").val(item.name);				$("#fdElementId").val(item.id);			});		}		//添加学校信息		if ($("#school")[0]) {			$("#school").autocomplete("${ctx}/ajax/user/getOrg", {				matchContains : true,				max : 100,				width : 410,				dataType : 'json',				// 加入对返回的json对象进行解析的函数，函数返回一个数组				parse : function(data) {					var rows = [];					for ( var i = 0; i < data.length; i++) {						rows[rows.length] = {							data : data[i],							value : data[i].name,							result : data[i].name						// 显示在输入文本框里的内容 ,						};					}					return rows;				},				formatItem : function(item) {					return item.name;				}			}).result(function(event, item) {				$("#school").val(item.name);				$("#fdElementId").val(item.id);			});		}	});</script></head><body>	<div class="page-body">		<form class="form-horizontal" method="post" id="inputForm"			action="${ctx}/admin/page/savePageConfig" name="form">			<input type="hidden" name="fdType" value="${ptype}" />			<section id="set-exam">				<div>					<table class="table table-striped">						<tr>							<th width="20%">							<c:if test="${ptype eq '01' }">老师:</c:if> 							<c:if test="${ptype eq '02' }">学校:</c:if>							</th>							<td><c:if test="${ptype eq '01' }">									<input type="text" name="teacher" id="teacher" class="required" width="180px">								</c:if> 								<c:if test="${ptype eq '02' }">									<input type="text" name="school" id="school" class="required"  width="180px">								</c:if> 								<input type="hidden" name="fdElementId" id="fdElementId">							</td>						</tr>						<tr>							<th>内容</th>							<td><textarea rows="2" cols="1" name="fdContent" id="fdContent"									class="required"></textarea></td>						</tr>						<tr>							<td colspan="4"><button class="btn btn-primary"									type="submit" value="提交" id="saveBtn">确定</button></td>						</tr>					</table>				</div>			</section>		</form>	</div></body></html>